{% extends 'base.html.twig' %}

{% block title %}Nouveau Livre{% endblock %}

{% block body %}

{% if is_granted('ROLE_ADMIN') %}
<div class="stepper">
    <h3>Étape {{ current_step }} sur {{ total_steps }} : {{ step_label }}</h3>
</div>

{{ form_start(form) }}
    
    {% if current_step == 4 %}
        <div class="summary-box" style="border: 1px solid #ccc; padding: 15px; margin-bottom: 20px;">
            <h4>Vérifiez les informations avant de valider :</h4>
            <ul>
                <li><strong>Type :</strong> {{ dto.type }}</li>
                <li><strong>Titre :</strong> {{ dto.name }}</li>
                <li><strong>Résumé :</strong> {{ dto.description }}</li>
                <li><strong>Prix :</strong> {{ dto.price }} €</li>
                <li><strong>Poids :</strong> {{ dto.weight }} kg</li>
                <li><strong>Stock :</strong> {{ dto.stock }} exemplaires</li>
            </ul>
        </div>
    {% endif %}

    {{ form_widget(form) }}
    
    <div class="actions" style="margin-top: 20px;">
        {% if current_step > 1 %}
            <button type="submit" name="previous" value="1" class="btn btn-secondary" formnovalidate>Précédent</button>
        {% endif %}
        
        {% if current_step < total_steps %}
            <button type="submit" class="btn btn-primary">Suivant</button>
        {% else %}
            <button type="submit" class="btn btn-success">Confirmer et Créer le livre</button>
        {% endif %}
    </div>

{{ form_end(form) }}

{% else %}
    <p>Vous n'avez pas les permissions nécessaires pour créer un nouveau livre.</p>
{% endif %}
{% endblock %}